syms G1 G2 G3 G4 B1 B2 B3 B4 V1 V2 V3 V4 theta1 theta2 theta3 theta4 G22 G33 G44 B33

P2 = ((G22)*V2^2) + V2*(V1*(G2-G1)*cos(theta2 - theta1)+ V1*(B2-B1)*sin(theta2 - theta1) + ...
V2*(G2-G3)*cos(theta2 - theta3) + V2*(B2-B3)*sin(theta2 - theta1) + V3*(G2-G4)*cos(theta2 - theta4) + ...
V3*(B2-B4)* sin(theta2 - theta4))

P3 = ((G33)*V3^2) + V3*(V1*(G3-G1)*cos(theta3 - theta1)+ V1*(B3-B1)*sin(theta3 - theta1) + ...
V2*(G3-G2)*cos(theta3 - theta2) + V2*(B3-B2)*sin(theta3 - theta2) + V3*(G3-G4)*cos(theta3 - theta4) + ...
V3*(B3-B4)* sin(theta3 - theta4))

Q3 = ((B33)*V3^2) + V3*(V1*(G3-G1)*sin(theta3 - theta1)+ V1*(B3-B1)*cos(theta3 - theta1) + ...
V2*(G3-G2)*sin(theta3 - theta2) + V2*(B3-B2)*cos(theta3 - theta2) + V3*(G3-G4)*sin(theta3 - theta4) + ...
V3*(B3-B4)* cos(theta3 - theta4))

P4 = (G44 * V4^2) + V4*(V1*(G4 - G1)*cos(theta4 - theta1) +V1*(B4 - B1)*sin(theta4 - theta1)+ V2*(G4 - G2)*...
cos(G4-G2) + V2*(B4-B2)*sin(B4-B2) + V3*(G4-G3)*cos(G4-G3) + V3*(B4-B3)*sin(B4-B3))

F(G1,G2, G3 ,G4 ,B1, B2, B3 ,B4 ,V1, V2, V3 ,V4 ,theta1 ,theta2 ,theta3 ,theta4 ,G22 ,G33 ,G44 ,B33) = P2 + P3 + Q3 + P4;

answer = jacobian(F, [P2 P3 Q3 P4])

